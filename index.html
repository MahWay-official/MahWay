<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>MahWay</title>
  <link rel="stylesheet" href="style.css">
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Cairo:wght@400;700&display=swap');

    body {
      margin: 0;
      font-family: 'Cairo', sans-serif;
      color: white;
      text-align: center;
      background: url('https://eetaeyba365.exactdn.com/wp-content/uploads/2022/02/b09f8c8f-41b6-4cdb-8724-aba38d7a987c.jpg?strip=all&lossy=1&ssl=1') no-repeat center center fixed;
      background-size: cover;
      animation: fadeIn 2s ease-in-out;
    }

    @keyframes fadeIn {
      from {opacity: 0;}
      to {opacity: 1;}
    }

    header {
      padding: 20px;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 10px;
      background-color: rgba(0,0,0,0.6);
    }

    header img {
      width: 50px;
      height: 50px;
      border-radius: 50%;
    }

    h1 {
      font-size: 2rem;
    }

    form {
      background: rgba(0, 0, 0, 0.6);
      padding: 20px;
      border-radius: 10px;
      display: block;
      margin: 20px auto;
      max-width: 320px;
    }

    input, select, textarea, button {
      display: block;
      width: 90%;
      margin: 10px auto;
      padding: 10px;
      border: none;
      border-radius: 5px;
    }

    .rating-container {
      margin: 30px auto;
      background-color: rgba(0,0,0,0.6);
      border-radius: 10px;
      padding: 20px;
      max-width: 350px;
    }

    .rating {
      font-size: 1.2rem;
      margin-bottom: 15px;
    }

    .stars {
      font-size: 2rem;
      color: gray;
      cursor: pointer;
      margin: 10px 0;
    }

    .stars span.active {
      color: gold;
      text-shadow: 0 0 5px gold;
    }

    .stars span.disabled {
      cursor: not-allowed;
      opacity: 0.7;
    }

    .last-rating {
      margin-top: 15px;
      padding: 10px;
      background: rgba(255,215,0,0.2);
      border-radius: 5px;
      display: none;
    }

    footer {
      margin-top: 30px;
      background-color: rgba(0,0,0,0.6);
      padding: 10px;
    }

    .lang-switcher {
      position: fixed;
      top: 10px;
      right: 10px;
    }

    .info {
      margin-top: 10px;
      font-size: 0.9rem;
    }

    .floating-btn {
      position: fixed;
      bottom: 20px;
      right: 20px;
      background: #007bff;
      color: white;
      width: 60px;
      height: 60px;
      border-radius: 50%;
      border: none;
      font-size: 30px;
      cursor: pointer;
      box-shadow: 0 4px 8px rgba(0,0,0,0.3);
      z-index: 1000;
    }

    .social-links {
      position: fixed;
      bottom: 90px;
      right: 20px;
      background: rgba(0,0,0,0.7);
      border-radius: 10px;
      padding: 10px;
      display: none;
      flex-direction: column;
      gap: 10px;
      z-index: 999;
    }

    .social-links a {
      color: white;
      text-decoration: none;
      font-size: 1.1rem;
    }

    #feedbackModal {
      display: none;
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      background: rgba(0, 0, 0, 0.9);
      padding: 20px;
      border-radius: 10px;
      z-index: 2000;
      color: white;
      width: 90%;
      max-width: 400px;
      box-shadow: 0 5px 15px rgba(0,0,0,0.5);
    }
    
    #feedbackModal h3 {
      margin-top: 0;
      color: gold;
    }
    
    #feedbackModal textarea {
      width: 100%;
      height: 120px;
      margin: 15px 0;
      padding: 10px;
      border-radius: 5px;
      border: 1px solid #444;
      background: rgba(255,255,255,0.1);
      color: white;
    }
    
    #feedbackModal .modal-buttons {
      display: flex;
      justify-content: space-between;
    }
    
    #feedbackModal button {
      padding: 10px 20px;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      font-weight: bold;
    }
    
    #feedbackModal .submit-btn {
      background: gold;
      color: #333;
    }
    
    #feedbackModal .cancel-btn {
      background: #555;
      color: white;
    }
    
    .thank-you-message {
      text-align: center;
      padding: 20px;
      display: none;
    }
    
    .thank-you-message p {
      font-size: 1.2rem;
      margin-bottom: 15px;
    }
    
    .thank-you-message .rating-display {
      font-size: 1.5rem;
      color: gold;
      margin: 10px 0;
    }
  </style>
</head>
<body>
  <div class="lang-switcher">
    <select onchange="changeLang(this.value)">
      <option value="en">English</option>
      <option value="ar">العربية</option>
    </select>
  </div>

  <header>
    <img src="https://raw.githubusercontent.com/MahWay26/MahWay/refs/heads/main/027187e0-e47c-4b04-b0fc-4104a213cc6b.png" alt="logo">
    <h1>MahWay</h1>
  </header>

  <form action="https://formspree.io/f/xnqepqyk" method="POST">
    <h3 id="local-title">شحن داخل مصر</h3>
    <input type="text" name="sender" placeholder="اسم الراسل" required>
    <input type="text" name="receiver" placeholder="اسم المرسل إليه" required>
    <input type="tel" name="phone" id="phone1" placeholder="رقم الهاتف" required>
    <select name="service" id="local-service">
      <option value="fast">سريعة</option>
      <option value="normal">عادية</option>
    </select>
    <input type="text" name="address" placeholder="العنوان" required>
    <textarea name="details" placeholder="وصف الشحنة" required></textarea>
    <button type="submit" id="submit-btn1">أرسل</button>
  </form>

  <form action="https://formspree.io/f/xnqepqyk" method="POST">
    <h3 id="intl-title">استيراد من خارج مصر</h3>
    <input type="text" name="name" placeholder="اسم العميل" required>
    <input type="tel" name="phone" id="phone2" placeholder="رقم الهاتف" required>
    <input type="text" name="cargo" placeholder="نوع الحمولة" required>
    <input type="text" name="weight" placeholder="الوزن المتوقع" required>
    <select name="service" id="intl-service">
      <option value="fast">سريعة</option>
      <option value="normal">عادية</option>
    </select>
    <input type="text" name="country" placeholder="الدولة المُرسِل منها" required>
    <input type="text" name="delivery-address" placeholder="العنوان في مصر" required>
    <textarea name="description" placeholder="تفاصيل إضافية"></textarea>
    <button type="submit" id="submit-btn2">أرسل</button>
  </form>

  <div class="rating-container">
    <div class="rating">
      <p id="rating-text">تقييم <strong>4.5/5</strong> من <strong>324,344</strong> مستخدم</p>
    </div>
    
    <div class="stars" id="stars">
      <span data-val="1">★</span>
      <span data-val="2">★</span>
      <span data-val="3">★</span>
      <span data-val="4">★</span>
      <span data-val="5">★</span>
    </div>
    
    <div class="last-rating" id="lastRating">
      <p id="last-rating-text">آخر تقييم لك: <span id="user-rating"></span></p>
    </div>
  </div>

  <div id="feedbackModal">
    <div id="feedbackForm">
      <h3 id="feedback-title">اكتب تعليقك أو نصيحتك:</h3>
      <textarea id="feedbackText" placeholder="شاركنا بتجربتك معنا..."></textarea>
      <div class="modal-buttons">
        <button class="cancel-btn" onclick="closeModal()" id="cancel-btn">إلغاء</button>
        <button class="submit-btn" onclick="submitFeedback()" id="feedback-btn">إرسال</button>
      </div>
    </div>
    
    <div class="thank-you-message" id="thankYouMessage">
      <p>شكراً لتقييمك وتعليقك!</p>
      <div class="rating-display">
        تقييمك: <span id="submittedRating"></span>
      </div>
      <button class="submit-btn" onclick="closeModal()">حسناً</button>
    </div>
  </div>

  <footer>
    <div class="info" id="info-text">
      تأسست: 26/1/2020 | رقم السجل التجاري: 54645612<br>
      محمود مدحت صادق - المالك الوحيد للشركة
    </div>
    <a id="email-link" href="mailto:mahway.contact@gmail.com?subject=استفسار عن خدمة&body=مرحباً ماه واي، لدي سؤال بخصوص..." style="color:white;text-decoration:underline;">
      mahway.contact@gmail.com
    </a>
    <br>
    <a href="https://www.pdfquran.com/download/big/big-quran.pdf" target="_blank" style="color: gold; font-weight: bold; display: inline-block; margin-top: 10px;">
      إذَا مَاتَ الإِنْسَانُ انْقَطَعَ عَمَلُهُ إلاَّ مِنْ ثَلاَثٍ : صَدَقَةٍ جَارِيَةٍ ، أَوْ عِلْمٍ يُنْتَفَعُ بِهِ ، أَوْ وَلَدٍ صَالِحٍ يَدْعُو لَهُ
    </a>
    <br>
    <a href="https://maps.app.goo.gl/fUWsV66ZYTRNYumQ8" target="_blank" style="color: lightblue; display: inline-block; margin-top: 10px; font-weight: bold;">
      Our location in Egypt
    </a>
  </footer>

  <button class="floating-btn" onclick="toggleSocialLinks()">+</button>
  <div class="social-links" id="socialLinks">
    <a href="https://www.facebook.com/mahmoud.opi.777" target="_blank">Facebook</a>
    <a href="https://wa.me/201559723397" target="_blank">WhatsApp</a>
    <a href="https://t.me/MahmoudMedhatOfficial" target="_blank">Telegram</a>
  </div>

  <script>
    // تحميل حالة التقييم عند فتح الصفحة
    document.addEventListener('DOMContentLoaded', function() {
      checkRatingStatus();
    });

    function toggleSocialLinks() {
      const menu = document.getElementById("socialLinks");
      menu.style.display = menu.style.display === "flex" ? "none" : "flex";
    }

    document.addEventListener("click", function (e) {
      const menu = document.getElementById("socialLinks");
      const btn = document.querySelector(".floating-btn");
      if (!btn.contains(e.target) && !menu.contains(e.target)) {
        menu.style.display = "none";
      }
    });

    const stars = document.querySelectorAll(".stars span");
    const modal = document.getElementById("feedbackModal");
    let currentRating = 0;

    stars.forEach((star, idx) => {
      star.addEventListener("mouseover", () => {
        // لا تفعل شيئا إذا كان المستخدم قد قام بالتقييم بالفعل
        if (localStorage.getItem('hasRated')) return;
        
        stars.forEach((s, i) => {
          s.classList.toggle("active", i <= idx);
        });
      });
      
      star.addEventListener("mouseout", () => {
        // لا تفعل شيئا إذا كان المستخدم قد قام بالتقييم بالفعل
        if (localStorage.getItem('hasRated')) return;
        
        stars.forEach((s, i) => {
          s.classList.toggle("active", i < currentRating);
        });
      });
      
      star.addEventListener("click", () => {
        // منع التقييم إذا كان المستخدم قد قام به بالفعل
        if (localStorage.getItem('hasRated')) return;
        
        currentRating = idx + 1;
        stars.forEach((s, i) => {
          s.classList.toggle("active", i <= idx);
        });
        modal.style.display = "block";
      });
    });

    function checkRatingStatus() {
      if (localStorage.getItem('hasRated')) {
        // إذا كان المستخدم قد قام بالتقييم، عرض تقييمه الأخير
        const lastRating = localStorage.getItem('lastRating');
        if (lastRating) {
          document.getElementById('lastRating').style.display = 'block';
          document.getElementById('user-rating').textContent = lastRating + ' ★';
        }
        
        // تعطيل النجوم
        stars.forEach(star => {
          star.classList.add('disabled');
        });
      }
    }

    function submitFeedback() {
      const text = document.getElementById("feedbackText").value;
      const feedbackData = new FormData();
      feedbackData.append("feedback", text);
      feedbackData.append("rating", currentRating);

      fetch("https://formspree.io/f/xnqepqyk", {
        method: "POST",
        body: feedbackData,
      });

      // حفظ حالة التقييم
      localStorage.setItem('hasRated', 'true');
      localStorage.setItem('lastRating', currentRating);
      
      // عرض رسالة الشكر
      document.getElementById('feedbackForm').style.display = 'none';
      document.getElementById('thankYouMessage').style.display = 'block';
      document.getElementById('submittedRating').textContent = currentRating + ' ★';
      
      // تحديث الصفحة لعرض التقييم الأخير
      setTimeout(() => {
        checkRatingStatus();
      }, 500);
    }

    function closeModal() {
      modal.style.display = 'none';
      document.getElementById('feedbackForm').style.display = 'block';
      document.getElementById('thankYouMessage').style.display = 'none';
      document.getElementById("feedbackText").value = '';
    }

    function changeLang(lang) {
      const en = {
        rating: "Rated <strong>4.5/5</strong> by <strong>324,344</strong> users",
        info: "Established: 26/1/2020 | Commercial Reg. No.: 54645612<br>Mahmoud Medhat Sadeq - Sole Owner of the Company",
        email: "mailto:mahway.contact@gmail.com?subject=Service Inquiry&body=Hello MahWay, I have a question about...",
        localTitle: "Local Shipping",
        intlTitle: "International Shipping",
        fast: "Fast",
        normal: "Normal",
        sender: "Sender Name",
        receiver: "Receiver Name",
        phone: "Phone Number",
        address: "Address",
        details: "Shipment Description",
        name: "Customer Name",
        cargo: "Cargo Type",
        weight: "Estimated Weight",
        country: "Shipping Country",
        deliveryAddress: "Delivery Address in Egypt",
        description: "Additional Details",
        submit: "Submit",
        feedbackTitle: "Write your comment or advice:",
        feedbackBtn: "Send",
        cancelBtn: "Cancel",
        feedbackPlaceholder: "Share your experience with us...",
        lastRating: "Your last rating:"
      };

      const ar = {
        rating: "تقييم <strong>4.5/5</strong> من <strong>324,344</strong> مستخدم",
        info: "تأسست: 26/1/2020 | رقم السجل التجاري: 54645612<br>محمود مدحت صادق - المالك الوحيد للشركة",
        email: "mailto:mahway.contact@gmail.com?subject=استفسار عن خدمة&body=مرحباً ماه واي، لدي سؤال بخصوص...",
        localTitle: "شحن داخل مصر",
        intlTitle: "استيراد من خارج مصر",
        fast: "سريعة",
        normal: "عادية",
        sender: "اسم الراسل",
        receiver: "اسم المرسل إليه",
        phone: "رقم الهاتف",
        address: "العنوان",
        details: "وصف الشحنة",
        name: "اسم العميل",
        cargo: "نوع الحمولة",
        weight: "الوزن المتوقع",
        country: "الدولة المُرسِل منها",
        deliveryAddress: "العنوان في مصر",
        description: "تفاصيل إضافية",
        submit: "أرسل",
        feedbackTitle: "اكتب تعليقك أو نصيحتك:",
        feedbackBtn: "إرسال",
        cancelBtn: "إلغاء",
        feedbackPlaceholder: "شاركنا بتجربتك معنا...",
        lastRating: "آخر تقييم لك:"
      };

      const content = lang === "ar" ? ar : en;
      
      document.getElementById("rating-text").innerHTML = content.rating;
      document.getElementById("info-text").innerHTML = content.info;
      document.getElementById("email-link").setAttribute("href", content.email);
      document.getElementById("local-title").innerText = content.localTitle;
      document.getElementById("intl-title").innerText = content.intlTitle;
      
      // تحديث حقول النموذج الأول
      document.querySelector('input[name="sender"]').placeholder = content.sender;
      document.querySelector('input[name="receiver"]').placeholder = content.receiver;
      document.getElementById("phone1").placeholder = content.phone;
      document.querySelector('input[name="address"]').placeholder = content.address;
      document.querySelector('textarea[name="details"]').placeholder = content.details;
      document.getElementById("submit-btn1").innerText = content.submit;
      
      // تحديث حقول النموذج الثاني
      document.querySelector('input[name="name"]').placeholder = content.name;
      document.getElementById("phone2").placeholder = content.phone;
      document.querySelector('input[name="cargo"]').placeholder = content.cargo;
      document.querySelector('input[name="weight"]').placeholder = content.weight;
      document.querySelector('input[name="country"]').placeholder = content.country;
      document.querySelector('input[name="delivery-address"]').placeholder = content.deliveryAddress;
      document.querySelector('textarea[name="description"]').placeholder = content.description;
      document.getElementById("submit-btn2").innerText = content.submit;
      
      // تحديث خيارات الخدمة
      document.getElementById("local-service").options[0].text = content.fast;
      document.getElementById("local-service").options[1].text = content.normal;
      document.getElementById("intl-service").options[0].text = content.fast;
      document.getElementById("intl-service").options[1].text = content.normal;
      
      // تحديث نموذج التقييم
      document.getElementById("feedback-title").innerText = content.feedbackTitle;
      document.getElementById("feedback-btn").innerText = content.feedbackBtn;
      document.getElementById("cancel-btn").innerText = content.cancelBtn;
      document.getElementById("feedbackText").placeholder = content.feedbackPlaceholder;
      document.getElementById("last-rating-text").innerHTML = content.lastRating + ' <span id="user-rating"></span>';
    }
  </script>
</body>
</html>
